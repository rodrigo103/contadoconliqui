import pandas as pd
import matplotlib.pyplot as plt

datos1=pd.read_csv('GGAL-ARG AF SEMANAL.csv',delimiter=",")                #data extraida de investing.com
datos2=pd.read_csv('GGAL-USD AF SEMANAL.csv',delimiter=",")
precio_gal_usd_af=datos1['Último']
precio_gal_arg_af=datos2['Último']

precio_gal_usd_lista_af=[]

for a,b in zip(precio_gal_usd_af,precio_gal_arg_af):                        #convertir la data en float
    one=float(a.replace(',',''))
    second=float(b.replace(',',''))
    precio_gal_usd_lista_af.append(one/second)

ccl_af=list(reversed(precio_gal_usd_lista_af))                            #lo di vuelta, ya que las fechas venian desde hoy hasta el pasado

ccl_af_1=ccl_af[1:]                                                       #lista dos para calcular el aumento con respecto a la semana anterior
aumento_semanal_af=[ccl_af_1[i]/ccl_af[i] for i in range(len(ccl_af_1))]  #aumento con respecto a la semana anterior
aumento_semanal_af.insert(0,1.00)                                         #agrego la base 1 a la primer semana

sum=1
aumento_acumulado_af=[]

for a in range(len(aumento_semanal_af)):
    sum*= aumento_semanal_af[a]
    aumento_acumulado_af.append(sum)

aumento_porcentual_af=[]

for b in aumento_acumulado_af:                            #para tener en el eje Y los porcentuales
    aumento_porcentual_af.append((b - 1.00) * 100)

semanas_gobierno_af=list(range(1,len(aumento_semanal_af)+1))

#macri
datos3=pd.read_csv('GGAL ARG MACRI SEMANAL .csv',delimiter=',')
datos4=pd.read_csv('GGAL USD MACRI SEMANAL.csv',delimiter=',')
precio_ggal_arg_mm=datos3['Último']
precio_ggal_usd_mm=datos4['Último']

precio_gal_usd_lista_mm=[]

for a,b in zip(precio_ggal_usd_mm,precio_ggal_arg_mm):
    one=float(a.replace(',',''))
    second=float(b.replace(',',''))
    precio_gal_usd_lista_mm.append(second/one)

ccl_mm=list(reversed(precio_gal_usd_lista_mm))             #contado con liqui macri

ccl_mm_1=ccl_mm[1:]                                        #lista dos para calcular el aumento con respecto a la semana anterior
aumento_semanal_mm=[ccl_mm_1[i]/ccl_mm[i] for i in range(len(ccl_mm_1))]  #aumento con respecto a la semana anterior
aumento_semanal_mm.insert(0,1.00)                              #agrego la base 1 a la primer semana

sum2=1
aumento_acumulado_mm=[]

for a in range(len(aumento_semanal_mm)):
    sum2*= aumento_semanal_mm[a]
    aumento_acumulado_mm.append(sum2)

aumento_porcentual_mm=[]

for b in aumento_acumulado_mm:                            #para tener en el eje Y los porcentuales
    aumento_porcentual_mm.append((b - 1.00) * 100)

plt.style.use('seaborn-darkgrid')
ax=plt.subplot()
ax.plot(range(len(aumento_semanal_af)),aumento_porcentual_af,color='cornflowerblue',label='Alberto Fernandez')
ax.plot(range(len(aumento_semanal_mm)),aumento_porcentual_mm,color='gold',label='Mauricio Macri')
ax.set_xlabel('semanas de gobierno')
ax.set_ylabel('Δ porcentual')
ax.set_title('variación acumulada de CCL acorde a semanas de Gobierno')
ax.margins(x=0)
ax.set_ylim(ymin=-40)

plt.legend(loc=4)
plt.show()
